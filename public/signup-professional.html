<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>SolutionHub | Professional Signup</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
:root{
  --primary:#6366f1;
  --primary-hover:#7c3aed;
  --bg:#0a0c1a;
  --card:#111827;
  --input:#1f2937;
  --text:#ffffff;
  --muted:#cbd5e1;
  --error:#ef4444;
  --success:#10b981;
  --border:rgba(255,255,255,0.1);
}

*{
  box-sizing:border-box;
  margin:0;
  padding:0;
  font-family:'Plus Jakarta Sans', Arial, sans-serif;
}

body{
  min-height:100vh;
  background:linear-gradient(145deg, var(--bg) 0%, #020617 100%);
  display:flex;
  align-items:center;
  justify-content:center;
  color:var(--text);
  padding:40px 20px;
}

.container{
  width:100%;
  max-width:700px;
  background:var(--card);
  padding:40px;
  border-radius:24px;
  box-shadow:0 25px 60px rgba(0,0,0,.6);
  border:1px solid var(--border);
}

.header{
  text-align:center;
  margin-bottom:32px;
}

.header h2{
  font-size:32px;
  font-weight:800;
  margin-bottom:8px;
  background:linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #ec4899 100%);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

.header p{
  color:var(--muted);
  font-size:15px;
}

.form-section{
  margin-bottom:28px;
}

.section-title{
  font-size:18px;
  font-weight:700;
  color:var(--text);
  margin-bottom:16px;
  padding-bottom:8px;
  border-bottom:2px solid var(--primary);
  display:flex;
  align-items:center;
  gap:10px;
}

.section-title i{
  color:var(--primary);
}

.form-row{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:16px;
}

.form-group{
  margin-bottom:16px;
}

label{
  display:block;
  margin-bottom:8px;
  font-size:14px;
  font-weight:600;
  color:var(--muted);
}

label.required::after{
  content:" *";
  color:var(--error);
}

input, select, textarea{
  width:100%;
  padding:12px 16px;
  border-radius:12px;
  border:1px solid var(--border);
  background:var(--input);
  color:var(--text);
  font-size:14px;
  font-family:'Plus Jakarta Sans', Arial, sans-serif;
  transition:all .3s ease;
}

input:focus, select:focus, textarea:focus{
  outline:none;
  border-color:var(--primary);
  box-shadow:0 0 0 3px rgba(99,102,241,.1);
}

textarea{
  resize:vertical;
  min-height:100px;
}

.file-input-wrapper{
  position:relative;
  overflow:hidden;
  display:inline-block;
  width:100%;
}

.file-input-wrapper input[type="file"]{
  position:absolute;
  left:-9999px;
}

.file-input-label{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  padding:14px 16px;
  background:var(--input);
  border:2px dashed var(--border);
  border-radius:12px;
  cursor:pointer;
  transition:all .3s ease;
  color:var(--muted);
  font-weight:600;
}

.file-input-label:hover{
  border-color:var(--primary);
  background:rgba(99,102,241,.05);
}

.file-input-label i{
  font-size:20px;
  color:var(--primary);
}

.file-name{
  display:block;
  margin-top:8px;
  font-size:12px;
  color:var(--success);
  font-weight:600;
}

small{
  display:block;
  margin-top:6px;
  color:var(--muted);
  font-size:12px;
}

.price-input{
  position:relative;
}

.price-input::before{
  content:"‚Çπ";
  position:absolute;
  left:16px;
  top:50%;
  transform:translateY(-50%);
  color:var(--muted);
  font-weight:700;
  font-size:16px;
}

.price-input input{
  padding-left:32px;
}

button{
  width:100%;
  margin-top:24px;
  padding:16px;
  background:linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
  border:none;
  border-radius:14px;
  color:#fff;
  font-size:16px;
  font-weight:700;
  cursor:pointer;
  transition:all .3s ease;
  box-shadow:0 8px 25px rgba(99,102,241,.4);
}

button:hover{
  transform:translateY(-2px);
  box-shadow:0 12px 35px rgba(99,102,241,.6);
}

button:disabled{
  opacity:0.6;
  cursor:not-allowed;
  transform:none;
}

.msg{
  margin-top:20px;
  padding:12px 16px;
  text-align:center;
  font-size:14px;
  font-weight:600;
  border-radius:12px;
  display:none;
}

.msg.show{
  display:block;
}

.error{
  background:rgba(239,68,68,.1);
  color:var(--error);
  border:1px solid var(--error);
}

.success{
  background:rgba(16,185,129,.1);
  color:var(--success);
  border:1px solid var(--success);
}

.footer{
  text-align:center;
  margin-top:24px;
  padding-top:24px;
  border-top:1px solid var(--border);
}

.footer a{
  color:var(--primary);
  text-decoration:none;
  font-weight:600;
  transition:color .3s ease;
}

.footer a:hover{
  color:var(--primary-hover);
}

@media (max-width:768px){
  .form-row{
    grid-template-columns:1fr;
  }
  .container{
    padding:28px 24px;
  }
}
</style>
</head>

<body>

<div class="container">
  <div class="header">
    <h2>Join as a Professional Expert</h2>
    <p>Share your expertise and connect with clients worldwide</p>
  </div>

  <form id="proSignupForm" enctype="multipart/form-data">
    
    <!-- Personal Information -->
    <div class="form-section">
      <div class="section-title">
        <i class="fas fa-user"></i>
        Personal Information
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="name" class="required">Full Name</label>
          <input id="name" type="text" name="name" placeholder="John Doe" required />
        </div>

        <div class="form-group">
          <label for="email" class="required">Email Address</label>
          <input id="email" type="email" name="email" placeholder="john@example.com" required />
        </div>
      </div>

      <div class="form-group">
        <label for="password" class="required">Password</label>
        <input id="password" type="password" name="password" placeholder="Minimum 6 characters" minlength="6" required />
      </div>
    </div>

    <!-- Professional Details -->
    <div class="form-section">
      <div class="section-title">
        <i class="fas fa-briefcase"></i>
        Professional Details
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="field" class="required">Domain/Field</label>
          <select id="field" name="field" required>
            <option value="">Select your domain</option>
            <option value="Programming">Programming</option>
            <option value="DevOps">DevOps & Cloud</option>
            <option value="Academics">Academics & Teaching</option>
            <option value="Medical">Medical & Healthcare</option>
            <option value="Engineering">Engineering</option>
            <option value="Business">Business & Management</option>
            <option value="Career">Career Counseling</option>
            <option value="Legal">Legal & Law</option>
            <option value="Finance">Finance & Accounting</option>
            <option value="Design">Design & Creative</option>
            <option value="Marketing">Marketing & Sales</option>
          </select>
        </div>

        <div class="form-group">
          <label for="experience" class="required">Years of Experience</label>
          <input id="experience" type="number" name="experience" min="0" max="50" placeholder="5" required />
        </div>
      </div>

      <div class="form-group">
        <label for="headline" class="required">Professional Headline</label>
        <input id="headline" type="text" name="headline" placeholder="Senior Full Stack Developer | React & Node.js Expert" maxlength="100" required />
        <small>A short tagline that describes your expertise (max 100 characters)</small>
      </div>

      <div class="form-group">
        <label for="summary" class="required">Professional Summary</label>
        <textarea id="summary" name="summary" placeholder="Describe your expertise, skills, and what you can help clients with..." maxlength="500" required></textarea>
        <small>Detailed description of your background and services (max 500 characters)</small>
      </div>

      <div class="form-group">
        <label for="linkedin">LinkedIn Profile</label>
        <input id="linkedin" type="url" name="linkedin" placeholder="https://linkedin.com/in/yourprofile" />
        <small>Optional: Add your LinkedIn profile URL</small>
      </div>
    </div>

    <!-- Pricing -->
    <div class="form-section">
      <div class="section-title">
        <i class="fas fa-rupee-sign"></i>
        Consultation Fee
      </div>

      <div class="form-group">
        <label for="price" class="required">Consultation Fee (per session)</label>
        <div class="price-input">
          <input id="price" type="number" name="price" min="100" max="10000" placeholder="500" required />
        </div>
        <small>Set your fee in INR (‚Çπ100 - ‚Çπ10,000 per session)</small>
      </div>
    </div>

    <!-- Documents -->
    <div class="form-section">
      <div class="section-title">
        <i class="fas fa-file-upload"></i>
        Documents & Verification
      </div>

      <div class="form-group">
        <label for="photo" class="required">Profile Photo</label>
        <div class="file-input-wrapper">
          <input id="photo" type="file" name="photo" accept="image/jpeg,image/png,image/jpg" required />
          <label for="photo" class="file-input-label">
            <i class="fas fa-camera"></i>
            <span>Choose Profile Photo</span>
          </label>
        </div>
        <span id="photoName" class="file-name"></span>
        <small>Upload a professional photo (JPG, PNG - Max 5MB)</small>
      </div>

      <div class="form-group">
        <label for="resume" class="required">Resume/CV</label>
        <div class="file-input-wrapper">
          <input id="resume" type="file" name="resume" accept=".pdf" required />
          <label for="resume" class="file-input-label">
            <i class="fas fa-file-pdf"></i>
            <span>Choose Resume (PDF)</span>
          </label>
        </div>
        <span id="resumeName" class="file-name"></span>
        <small>Upload your resume in PDF format (Max 5MB)</small>
      </div>
    </div>

    <button type="submit" id="submitBtn">
      <i class="fas fa-user-plus"></i> Register as Professional Expert
    </button>
  </form>

  <div id="message" class="msg"></div>

  <div class="footer">
    <small>Already registered? <a href="/login.html">Login Here</a></small>
  </div>
</div>

<script>
const form = document.getElementById("proSignupForm");
const msg = document.getElementById("message");
const submitBtn = document.getElementById("submitBtn");

// File input handling
document.getElementById("photo").addEventListener("change", function(e) {
  const fileName = e.target.files[0]?.name || "";
  document.getElementById("photoName").textContent = fileName ? `‚úì ${fileName}` : "";
});

document.getElementById("resume").addEventListener("change", function(e) {
  const fileName = e.target.files[0]?.name || "";
  document.getElementById("resumeName").textContent = fileName ? `‚úì ${fileName}` : "";
});

form.addEventListener("submit", async (e) => {
  e.preventDefault();

  msg.textContent = "";
  msg.className = "msg";
  submitBtn.disabled = true;
  submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Registering...';

  const formData = new FormData(form);

  // Validation
  const photo = document.getElementById("photo").files[0];
  const resume = document.getElementById("resume").files[0];

  if (photo && photo.size > 5 * 1024 * 1024) {
    msg.textContent = "Photo size must be less than 5MB";
    msg.classList.add("error", "show");
    submitBtn.disabled = false;
    submitBtn.innerHTML = '<i class="fas fa-user-plus"></i> Register as Professional Expert';
    return;
  }

  if (resume && resume.size > 5 * 1024 * 1024) {
    msg.textContent = "Resume size must be less than 5MB";
    msg.classList.add("error", "show");
    submitBtn.disabled = false;
    submitBtn.innerHTML = '<i class="fas fa-user-plus"></i> Register as Professional Expert';
    return;
  }

  try {
    console.log('üì§ Submitting professional signup...');
    
    const res = await fetch("/api/pro-signup", {
      method: "POST",
      body: formData
    });

    const data = await res.json();
    console.log('üì• Response:', data);

    if (data.success) {
      msg.classList.add("success", "show");
      msg.innerHTML = '<i class="fas fa-check-circle"></i> Registration successful! Redirecting to login...';
      
      setTimeout(() => {
        window.location.href = "/login.html";
      }, 2000);
    } else {
      msg.classList.add("error", "show");
      msg.innerHTML = `<i class="fas fa-exclamation-circle"></i> ${data.error || "Signup failed. Please try again."}`;
      submitBtn.disabled = false;
      submitBtn.innerHTML = '<i class="fas fa-user-plus"></i> Register as Professional Expert';
    }
  } catch (err) {
    console.error('‚ùå Signup error:', err);
    msg.classList.add("error", "show");
    msg.innerHTML = '<i class="fas fa-exclamation-triangle"></i> Server error. Please try again later.';
    submitBtn.disabled = false;
    submitBtn.innerHTML = '<i class="fas fa-user-plus"></i> Register as Professional Expert';
  }
});

// Character counter for textarea
document.getElementById("summary").addEventListener("input", function(e) {
  const maxLength = 500;
  const currentLength = e.target.value.length;
  const small = e.target.nextElementSibling;
  small.textContent = `${currentLength}/${maxLength} characters`;
  
  if (currentLength > maxLength * 0.9) {
    small.style.color = "var(--warning)";
  } else {
    small.style.color = "var(--muted)";
  }
});

// Character counter for headline
document.getElementById("headline").addEventListener("input", function(e) {
  const maxLength = 100;
  const currentLength = e.target.value.length;
  const small = e.target.nextElementSibling;
  small.textContent = `${currentLength}/${maxLength} characters`;
  
  if (currentLength > maxLength * 0.9) {
    small.style.color = "var(--warning)";
  } else {
    small.style.color = "var(--muted)";
  }
});

console.log('‚úÖ Professional signup page loaded');
</script>

</body>
</html>
