<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Solvenut | Create Client Account</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <style>
    :root{
      --brand-1:#10b981;
      --brand-2:#14b8a6;
      --accent:#f59e0b;
      --bg:#0a0f1e;
      --card:rgba(15,23,42,0.9);
      --muted:#94a3b8;
      --text:#f8fafc;
      --border:rgba(148,163,184,0.4);
      --glass:rgba(15,23,42,0.92);
      --shadow-soft:0 28px 80px rgba(15,23,42,0.95);
      --max-width:1240px;
    }

    *{margin:0;padding:0;box-sizing:border-box}
    html{font-family:'Plus Jakarta Sans',system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;scroll-behavior:smooth}
    body{
      background:var(--bg);
      color:var(--text);
      min-height:100vh;
      display:flex;
      flex-direction:column;
      -webkit-font-smoothing:antialiased;
    }
    a{color:inherit;text-decoration:none}
    button{font-family:inherit}

    .ambient-glow{
      position:fixed;inset:0;z-index:-1;pointer-events:none;
      background:
        radial-gradient(circle at 20% 0%, rgba(16,185,129,0.15) 0%, transparent 45%),
        radial-gradient(circle at 80% 100%, rgba(245,158,11,0.12) 0%, transparent 40%);
    }

    .container{max-width:var(--max-width);margin:0 auto;padding:0 20px}

    header{
      position:sticky;top:0;z-index:1000;
      background:linear-gradient(180deg, rgba(10,15,30,0.96), rgba(10,15,30,0.86));
      border-bottom:1px solid rgba(255,255,255,0.06);
      backdrop-filter:blur(14px);
    }
    .header-inner{
      display:flex;align-items:center;justify-content:space-between;
      gap:16px;padding:14px 20px;
    }
    .logo{display:flex;align-items:center;gap:10px;cursor:pointer}
    .logo .mark{
      width:38px;height:38px;border-radius:11px;
      background:linear-gradient(135deg,var(--brand-1),var(--brand-2));
      display:grid;place-items:center;font-size:20px;
    }
    .logo .txt{font-weight:800;font-size:19px}
    .logo .txt .nut{color:var(--accent)}

    nav.desktop{display:flex;gap:22px;align-items:center}
    nav.desktop a{
      font-size:14px;font-weight:600;color:var(--muted);
      padding:6px 10px;border-radius:8px;
      transition:all .2s;
    }
    nav.desktop a:hover{color:var(--text);background:rgba(15,23,42,0.7)}

    .actions{display:flex;gap:10px;align-items:center}
    .btn{
      display:inline-flex;align-items:center;gap:8px;
      padding:8px 14px;border-radius:12px;
      border:0;cursor:pointer;font-weight:700;
      font-size:13px;transition:all .22s;
    }
    .btn-primary{
      background:linear-gradient(90deg,var(--brand-1),var(--brand-2));
      color:white;box-shadow:0 10px 32px rgba(16,185,129,0.4);
    }
    .btn-primary:hover{transform:translateY(-1px)}
    .btn-ghost{
      background:transparent;
      border:1px solid rgba(148,163,184,0.35);
      color:var(--text);
    }
    .btn-ghost:hover{
      background:rgba(15,23,42,0.7);
      border-color:rgba(148,163,184,0.7);
    }

    .nav-user-pill{
      display:inline-flex;align-items:center;gap:6px;
      padding:6px 12px;border-radius:999px;
      background:rgba(15,23,42,0.9);
      border:1px solid rgba(148,163,184,0.6);
      color:var(--muted);font-size:13px;
      max-width:160px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
    }
    .nav-logout{
      border:0;background:transparent;
      color:#f97373;font-size:12px;cursor:pointer;
    }

    .mobile-toggle{
      display:none;border:0;background:transparent;
      color:var(--text);font-size:22px;cursor:pointer;
    }
    .mobile-drawer{
      position:fixed;inset:0;
      background:linear-gradient(180deg, rgba(10,15,30,0.98), rgba(10,15,30,0.96));
      z-index:1500;transform:translateY(-100%);
      transition:transform .3s ease;
      display:flex;flex-direction:column;
      padding:26px;backdrop-filter:blur(10px);
    }
    .mobile-drawer.open{transform:none}
    .mobile-drawer a{
      padding:13px 0;font-size:16px;
      border-bottom:1px solid rgba(148,163,184,0.2);
      color:var(--muted);font-weight:600;
    }

    @media(max-width:768px){
      nav.desktop{display:none}
      .mobile-toggle{display:inline-flex}
    }

    main{
      flex:1;display:flex;align-items:center;
      justify-content:center;padding:36px 20px 40px;
    }

    .auth-card{
      display:grid;
      grid-template-columns:minmax(0,1.1fr) minmax(0,1fr);
      background:var(--glass);
      border-radius:22px;
      border:1px solid var(--border);
      box-shadow:var(--shadow-soft);
      width:100%;max-width:980px;
      overflow:hidden;
    }
    .auth-info{
      padding:42px 34px 42px 38px;
      border-right:1px solid rgba(148,163,184,0.35);
      background:radial-gradient(circle at top left, rgba(16,185,129,0.2) 0%, transparent 55%);
    }
    .auth-info h1{
      font-size:26px;font-weight:800;
      margin-bottom:8px;
    }
    .auth-info h1 span{
      background:linear-gradient(90deg,var(--brand-1),var(--accent));
      -webkit-background-clip:text;background-clip:text;
      color:transparent;
    }
    .auth-info p{
      color:var(--muted);font-size:14px;
      margin-bottom:18px;max-width:360px;
    }
    .info-points{
      display:flex;flex-direction:column;
      gap:8px;font-size:13px;color:var(--muted);
    }
    .info-points span i{color:var(--brand-1);margin-right:6px}

    .auth-form-side{
      padding:42px 34px;
    }
    .form-header{margin-bottom:20px}
    .form-header h2{
      font-size:22px;font-weight:800;margin-bottom:4px;
    }
    .form-header p{
      font-size:13px;color:var(--muted);
    }

    .input-group{margin-bottom:16px}
    .input-group label{
      display:block;font-size:11px;
      font-weight:700;color:var(--muted);
      margin-bottom:6px;text-transform:uppercase;
      letter-spacing:0.7px;
    }
    .input-wrapper{position:relative}
    .input-wrapper i{
      position:absolute;left:14px;top:50%;
      transform:translateY(-50%);
      color:var(--muted);font-size:14px;
      pointer-events:none;
    }
    .input-wrapper input,
    .input-wrapper select{
      width:100%;padding:12px 12px 12px 40px;
      border-radius:12px;
      border:1px solid rgba(148,163,184,0.55);
      background:rgba(15,23,42,0.95);
      color:var(--text);font-size:14px;
      outline:none;transition:.22s;
    }
    .input-wrapper select{
      appearance:none;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2394a3b8'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
      background-repeat:no-repeat;
      background-position:right 14px center;
      background-size:18px;
      cursor:pointer;
    }
    .input-wrapper input:focus,
    .input-wrapper select:focus{
      border-color:var(--brand-1);
      box-shadow:0 0 0 3px rgba(16,185,129,0.25);
    }

    .btn-signup{
      width:100%;margin-top:6px;
      background:linear-gradient(90deg,var(--brand-1),var(--brand-2));
      color:white;border:0;border-radius:12px;
      padding:12px 0;font-size:15px;
      font-weight:800;cursor:pointer;
      transition:.22s;
      box-shadow:0 14px 36px rgba(16,185,129,0.5);
    }
    .btn-signup:hover{
      transform:translateY(-1px);
      box-shadow:0 18px 44px rgba(16,185,129,0.55);
    }

    .terms-note{
      margin-top:12px;font-size:12px;
      color:var(--muted);text-align:center;
    }
    .terms-note a{color:var(--accent);font-weight:600}

    .have-account{
      margin-top:14px;font-size:13px;
      color:var(--muted);text-align:center;
    }
    .have-account a{color:var(--accent);font-weight:600}

    footer{
      padding:24px 0 20px;
      border-top:1px solid rgba(148,163,184,0.35);
      background:linear-gradient(180deg, transparent, rgba(10,15,30,0.9));
      font-size:12px;color:var(--muted);
    }
    .footer-row{
      display:flex;justify-content:space-between;
      gap:12px;flex-wrap:wrap;align-items:center;
    }

    @media(max-width:960px){
      .auth-card{grid-template-columns:1fr}
      .auth-info{
        border-right:none;border-bottom:1px solid rgba(148,163,184,0.35);
      }
    }
    @media(max-width:640px){
      main{padding:28px 16px 34px}
      .auth-info{padding:26px 22px}
      .auth-form-side{padding:26px 22px}
      .footer-row{flex-direction:column;align-items:flex-start}
    }
  </style>
</head>
<body>
  <div class="ambient-glow" aria-hidden="true"></div>

  <header>
    <div class="container header-inner">
      <div class="logo" onclick="location.href='index.html'">
        <div class="mark">ðŸ¥œ</div>
        <div class="txt">Solve<span class="nut">nut</span></div>
      </div>

      <nav class="desktop">
        <a href="index.html#categories">Categories</a>
        <a href="index.html#how">How It Works</a>
        <a href="index.html#features">Features</a>
        <a href="experts.html">Find Experts</a>
      </nav>

      <div class="actions" id="navAuth"></div>

      <button class="mobile-toggle" id="mobileToggle" aria-expanded="false" aria-controls="mobileDrawer">
        <i class="fa-solid fa-bars"></i>
      </button>
    </div>
  </header>

  <div id="mobileDrawer" class="mobile-drawer" role="dialog" aria-modal="true" aria-hidden="true" style="display:none">
    <button id="closeDrawer" style="align-self:flex-end;background:transparent;border:0;color:var(--text);font-size:24px;padding:6px;cursor:pointer">
      <i class="fa-solid fa-xmark"></i>
    </button>
    <a href="index.html#categories">Categories</a>
    <a href="index.html#how">How It Works</a>
    <a href="index.html#features">Features</a>
    <a href="experts.html">Find Experts</a>
  </div>

  <main>
    <div class="container">
      <div class="auth-card">
        <section class="auth-info">
          <h1>Create your <span>client account</span></h1>
          <p>Ask verified human experts about health, money, studies, relationships, and moreâ€”anytime you feel stuck.</p>
          <div class="info-points">
            <span><i class="fa-solid fa-circle-check"></i> One account to talk to any expert on Solvenut</span>
            <span><i class="fa-solid fa-circle-check"></i> Pay only for the minutes you actually use</span>
            <span><i class="fa-solid fa-circle-check"></i> Your chats and call notes are securely stored</span>
          </div>
        </section>

        <section class="auth-form-side">
          <div class="form-header">
            <h2>Sign up as client</h2>
            <p>It takes less than a minute. You can delete your account anytime.</p>
          </div>

          <form id="signupForm" autocomplete="on">
            <div class="input-group">
              <label for="name">Full name</label>
              <div class="input-wrapper">
                <i class="fa-solid fa-user"></i>
                <input type="text" id="name" name="name" placeholder="Your full name" required autocomplete="name">
              </div>
            </div>

            <div class="input-group">
              <label for="email">Email address</label>
              <div class="input-wrapper">
                <i class="fa-solid fa-envelope"></i>
                <input type="email" id="email" name="email" placeholder="you@example.com" required autocomplete="email">
              </div>
            </div>

            <div class="input-group">
              <label for="password">Password</label>
              <div class="input-wrapper">
                <i class="fa-solid fa-lock"></i>
                <input type="password" id="password" name="password" placeholder="Create a strong password" required autocomplete="new-password">
              </div>
            </div>

            <div class="input-group">
              <label for="interest">Main category you care about</label>
              <div class="input-wrapper">
                <i class="fa-solid fa-layer-group"></i>
                <select id="interest" name="interest">
                  <option value="" selected disabled>Select a category (optional)</option>
                  <option value="health">Health & wellness</option>
                  <option value="studies">Studies & exams</option>
                  <option value="money">Money & finance</option>
                  <option value="tech">Tech & coding</option>
                  <option value="relationships">Life & relationships</option>
                </select>
              </div>
            </div>

            <button type="submit" class="btn-signup" id="signupBtn">
              Create my Solvenut account
            </button>
          </form>

          <div class="terms-note">
            By signing up, you agree to Solvenutâ€™s <a href="#">Terms</a> and <a href="#">Privacy Policy</a>.
          </div>
          <div class="have-account">
            Already have an account? <a href="login.html">Log in</a>
          </div>
        </section>
      </div>
    </div>
  </main>

  <footer>
    <div class="container footer-row">
      <div>Â© 2026 Solvenut. Making expert knowledge accessible and affordable.</div>
      <div style="display:flex;gap:14px;flex-wrap:wrap;">
        <a href="#" style="color:var(--muted)">Privacy</a>
        <a href="#" style="color:var(--muted)">Terms</a>
        <a href="#" style="color:var(--muted)">Support</a>
      </div>
    </div>
  </footer>

  <script>
    // ==== AUTH STATE + AUTO-REDIRECT IF ALREADY LOGGED IN ====
    const token = localStorage.getItem('token');
    const role = localStorage.getItem('role');
    const storedName =
      localStorage.getItem('name') ||
      localStorage.getItem('username') ||
      (localStorage.getItem('email') ? localStorage.getItem('email').split('@')[0] : null);

    const navAuth = document.getElementById('navAuth');

    function logout(){
      if(confirm('Logout from this device?')){
        localStorage.clear();
        location.href = 'login.html';
      }
    }
    window.logout = logout;

    function handleExistingSession(){
      if(token && role){
        const dashUrl = role === 'expert' ? 'expert-dashboard.html' : 'client-dashboard.html';
        window.location.replace(dashUrl);
      }
    }

    function renderNavAuth(){
      if(token && role){
        const dashUrl = role === 'expert' ? 'expert-dashboard.html' : 'client-dashboard.html';
        navAuth.innerHTML = `
          <div class="nav-user-pill">
            <i class="fa-regular fa-circle-user"></i>
            <span>${storedName || 'User'}</span>
          </div>
          <a class="btn btn-ghost" href="${dashUrl}" style="font-size:13px;padding:6px 12px">Dashboard</a>
          <button class="nav-logout" onclick="logout()">Logout</button>
        `;
      }else{
        navAuth.innerHTML = `
          <a class="btn btn-ghost" href="login.html">Log in</a>
        `;
      }
    }

    // ==== MOBILE NAV ====
    const mobileToggle = document.getElementById('mobileToggle');
    const mobileDrawer = document.getElementById('mobileDrawer');
    const closeDrawer = document.getElementById('closeDrawer');

    function openDrawer(){
      mobileDrawer.style.display = 'flex';
      setTimeout(()=> mobileDrawer.classList.add('open'), 20);
      mobileDrawer.setAttribute('aria-hidden','false');
      mobileToggle.setAttribute('aria-expanded','true');
    }
    function closeMobile(){
      mobileDrawer.classList.remove('open');
      mobileDrawer.setAttribute('aria-hidden','true');
      mobileToggle.setAttribute('aria-expanded','false');
      setTimeout(()=> mobileDrawer.style.display='none', 260);
    }
    mobileToggle?.addEventListener('click', openDrawer);
    closeDrawer?.addEventListener('click', closeMobile);

    // ==== SIGNUP HANDLER ====
    document.getElementById("signupForm").addEventListener("submit", async (e) => {
      e.preventDefault();

      const name = document.getElementById("name").value.trim();
      const email = document.getElementById("email").value.trim().toLowerCase();
      const password = document.getElementById("password").value;
      const btn = document.getElementById("signupBtn");
      const originalText = btn.innerText;

      btn.innerText = "Creating your accountâ€¦";
      btn.style.opacity = "0.75";
      btn.disabled = true;

      try {
        const res = await fetch("/api/register", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ name, email, password })
        });

        const data = await res.json();

        if (!data.success) {
          alert(data.error || "Signup failed. Please try again.");
          btn.innerText = originalText;
          btn.style.opacity = "1";
          btn.disabled = false;
          return;
        }

        btn.innerHTML = '<i class="fa-solid fa-circle-check"></i> Account created!';
        setTimeout(() => {
          window.location.href = "login.html";
        }, 1000);
      } catch (err) {
        alert("Connection error. Please try again.");
        btn.innerText = originalText;
        btn.style.opacity = "1";
        btn.disabled = false;
      }
    });

    // INIT
    handleExistingSession();
    renderNavAuth();
  </script>
</body>
</html>
